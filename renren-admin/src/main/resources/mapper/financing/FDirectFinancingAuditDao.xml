<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="io.renren.modules.financing.dao.FDirectFinancingAuditDao">
    <resultMap id="BaseResultMap" type="io.renren.modules.financing.dto.FDirectFinancingAuditDTO">
        <result property="id" column="id"/>
        <result property="creditId" column="credit_id"/>
        <result property="financingOrg" column="financing_org"/>
        <result property="varieties" column="varieties"/>
        <result property="approveOrg" column="approve_org"/>
        <result property="approveNo" column="approve_no"/>
        <result property="startDate" column="start_date"/>
        <result property="endDate" column="end_date"/>
        <result property="approveQuota" column="approve_quota"/>
        <result property="purpose" column="purpose"/>
        <result property="issueSum" column="issue_sum"/>
        <result property="issueQuota" column="issue_quota"/>
        <result property="rate" column="rate"/>
        <result property="loanDate" column="loan_date"/>
        <result property="repaymentDate" column="repayment_date"/>
        <result property="financingBalance" column="financing_balance"/>
        <result property="otherExpenses" column="other_expenses"/>
        <result property="creditMeasures" column="credit_measures"/>
        <result property="interestMethod" column="interest_method"/>
        <result property="repaymentPlan" column="repayment_plan"/>
        <result property="remarks" column="remarks"/>
        <result property="isChecked" column="is_checked"/>
        <result property="investor" column="investor"/>
        <result property="project" column="project"/>
        <result property="intermediaryStructure" column="intermediary_structure"/>
        <result property="groupChecked" column="group_checked"/>
        <result property="groupCheckedDes" column="group_checked_des"/>
        <result property="secComId" column="sec_com_id"/>
    </resultMap>
    <sql id="Base_Column_List">
        id,approve_no,varieties,approve_org,sec_com_id,service_cycle,interest_method,currency,
        foreign_currency_amount,rate,exchange_rate,issue,dept_id,issue_quota,issue_date,value_date,
        due_date,financing_balance,purpose,other_expenses,other_expenses_desc,credit_measures,guarantee,
        collateral,pledge,is_checked,repayment_plan,creator,create_date,investor,project,intermediary_structure
    </sql>
    <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List" />
        from f_direct_financing
        where id = #{id,jdbcType=BIGINT}
    </select>

    <select id="getlist" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"></include>
        from f_direct_financing
        where is_checked=1
    </select>

    <select id="getInfoByApprovalNo" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"></include>
        from f_direct_financing
        where approve_no=#{approveNo,jdbcType=VARCHAR}
        limit 1
    </select>

    <select id="getDealData" resultType="io.renren.modules.financing.dto.FDirectFinancingAuditDTO">
        SELECT a.*,b.varieties
        FROM f_direct_financing a
                 LEFT JOIN f_direct_financing_approval b
                           on a.approve_no = b.approve_no
        WHERE a.id=#{id,jdbcType=VARCHAR}
    </select>

    <!--  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">-->
    <!--    delete from f_direct_financing_approval-->
    <!--    where id = #{id,jdbcType=BIGINT}-->
    <!--  </delete>-->
    <!--  <insert id="insert" keyColumn="id" keyProperty="id" parameterType="io.renren.modules.financing.entity.FDirectFinancingApproval" useGeneratedKeys="true">-->
    <!--    insert into f_direct_financing_approval (dept_id, dept_name, approve_org, -->
    <!--      approve_no, currency, issue_quota-->
    <!--      )-->
    <!--    values (#{deptId,jdbcType=BIGINT}, #{deptName,jdbcType=VARCHAR}, #{approveOrg,jdbcType=VARCHAR}, -->
    <!--      #{approveNo,jdbcType=VARCHAR}, #{currency,jdbcType=VARCHAR}, #{issueQuota,jdbcType=INTEGER}-->
    <!--      )-->
    <!--  </insert>-->
    <!--  <insert id="insertSelective" keyColumn="id" keyProperty="id" parameterType="io.renren.modules.financing.entity.FDirectFinancingApproval" useGeneratedKeys="true">-->
    <!--    insert into f_direct_financing_approval-->
    <!--    <trim prefix="(" suffix=")" suffixOverrides=",">-->
    <!--      <if test="deptId != null">-->
    <!--        dept_id,-->
    <!--      </if>-->
    <!--      <if test="deptName != null">-->
    <!--        dept_name,-->
    <!--      </if>-->
    <!--      <if test="approveOrg != null">-->
    <!--        approve_org,-->
    <!--      </if>-->
    <!--      <if test="approveNo != null">-->
    <!--        approve_no,-->
    <!--      </if>-->
    <!--      <if test="currency != null">-->
    <!--        currency,-->
    <!--      </if>-->
    <!--      <if test="issueQuota != null">-->
    <!--        issue_quota,-->
    <!--      </if>-->
    <!--    </trim>-->
    <!--    <trim prefix="values (" suffix=")" suffixOverrides=",">-->
    <!--      <if test="deptId != null">-->
    <!--        #{deptId,jdbcType=BIGINT},-->
    <!--      </if>-->
    <!--      <if test="deptName != null">-->
    <!--        #{deptName,jdbcType=VARCHAR},-->
    <!--      </if>-->
    <!--      <if test="approveOrg != null">-->
    <!--        #{approveOrg,jdbcType=VARCHAR},-->
    <!--      </if>-->
    <!--      <if test="approveNo != null">-->
    <!--        #{approveNo,jdbcType=VARCHAR},-->
    <!--      </if>-->
    <!--      <if test="currency != null">-->
    <!--        #{currency,jdbcType=VARCHAR},-->
    <!--      </if>-->
    <!--      <if test="issueQuota != null">-->
    <!--        #{issueQuota,jdbcType=INTEGER},-->
    <!--      </if>-->
    <!--    </trim>-->
    <!--  </insert>-->
    <!--  <update id="updateByPrimaryKeySelective" parameterType="io.renren.modules.financing.entity.FDirectFinancingApproval">-->
    <!--    update f_direct_financing_approval-->
    <!--    <set>-->
    <!--      <if test="deptId != null">-->
    <!--        dept_id = #{deptId,jdbcType=BIGINT},-->
    <!--      </if>-->
    <!--      <if test="deptName != null">-->
    <!--        dept_name = #{deptName,jdbcType=VARCHAR},-->
    <!--      </if>-->
    <!--      <if test="approveOrg != null">-->
    <!--        approve_org = #{approveOrg,jdbcType=VARCHAR},-->
    <!--      </if>-->
    <!--      <if test="approveNo != null">-->
    <!--        approve_no = #{approveNo,jdbcType=VARCHAR},-->
    <!--      </if>-->
    <!--      <if test="currency != null">-->
    <!--        currency = #{currency,jdbcType=VARCHAR},-->
    <!--      </if>-->
    <!--      <if test="issueQuota != null">-->
    <!--        issue_quota = #{issueQuota,jdbcType=INTEGER},-->
    <!--      </if>-->
    <!--    </set>-->
    <!--    where id = #{id,jdbcType=BIGINT}-->
    <!--  </update>-->
    <!--  <update id="updateByPrimaryKey" parameterType="io.renren.modules.financing.entity.FDirectFinancingApproval">-->
    <!--    update f_direct_financing_approval-->
    <!--    set dept_id = #{deptId,jdbcType=BIGINT},-->
    <!--      dept_name = #{deptName,jdbcType=VARCHAR},-->
    <!--      approve_org = #{approveOrg,jdbcType=VARCHAR},-->
    <!--      approve_no = #{approveNo,jdbcType=VARCHAR},-->
    <!--      currency = #{currency,jdbcType=VARCHAR},-->
    <!--      issue_quota = #{issueQuota,jdbcType=INTEGER}-->
    <!--    where id = #{id,jdbcType=BIGINT}-->
    <!--  </update>-->
</mapper>